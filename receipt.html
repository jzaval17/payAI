<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Payment Receipt — PrankPay</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="receipt-page">
  <header class="receipt-header">
    <button id="receipt-back" class="receipt-back" aria-label="Back">
      <!-- left arrow -->
      <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M15 6 L9 12 L15 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
    </button>
  </header>

  <main class="receipt-main">
    <div class="receipt-amount" id="receipt-amount">$0.00</div>
    <div class="receipt-subtitle" id="receipt-subtitle">Transfer to Bank</div>
    <div class="receipt-datetime" id="receipt-datetime"></div>

    <section class="receipt-card">
      <div class="receipt-row">
        <div class="receipt-label">Status:</div>
        <div class="receipt-value" id="receipt-status">Pending</div>
      </div>

      <div class="receipt-row small">
        <div class="receipt-label">Note:</div>
        <div class="receipt-value" id="receipt-note">Transferred from Apple Cash to Sutton Bank (•••• 1274)</div>
      </div>

      <div class="receipt-row small">
        <div class="receipt-label">Transaction ID</div>
        <div class="receipt-value mono" id="receipt-id">—</div>
      </div>
    </section>
  </main>

  <script>
    // Read URL params and populate the receipt
    const params = new URLSearchParams(location.search);
    const amount = params.get('amount') || '$20.00';
    const subtitle = params.get('subtitle') || 'Transfer to Bank';
    const status = params.get('status') || 'Cleared';
    const note = params.get('note') || 'Transferred from Apple Cash to Sutton Bank (•••• 1274)';
    const txid = params.get('id') || (Math.random().toString(36).slice(2, 12));

    document.getElementById('receipt-amount').textContent = amount;
    document.getElementById('receipt-subtitle').textContent = subtitle;
    document.getElementById('receipt-status').textContent = status;
    document.getElementById('receipt-note').textContent = note;
    document.getElementById('receipt-id').textContent = txid;

    // Show current formatted datetime
    const dtEl = document.getElementById('receipt-datetime');
    const now = new Date();
    dtEl.textContent = now.toLocaleString();

    // Back button: replace history so receipt doesn't remain in back stack
    document.getElementById('receipt-back').addEventListener('click', () => {
      // Replace to clear receipt page from history
      location.replace('index.html');
    });

    // If user presses browser back, ensure we go to index and not keep receipt
    window.addEventListener('popstate', () => {
      location.replace('index.html');
    });
  </script>
</body>
</html>
